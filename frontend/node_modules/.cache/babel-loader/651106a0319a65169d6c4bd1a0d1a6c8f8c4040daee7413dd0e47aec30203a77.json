{"ast":null,"code":"var _jsxFileName = \"/Applications/MAMP/htdocs/ticketmaster/src/context/AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useState, useEffect, useContext } from 'react';\nimport { getCurrentSession, getCurrentUser, signOut, signIn } from '../services/authService';\nimport supabase from '../supabaseClient';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\n\n// Check if we're using placeholder values\nconst isUsingPlaceholders = supabase.supabaseUrl.includes('placeholder-project');\nexport function AuthProvider({\n  children\n}) {\n  _s();\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    // Check active session\n    async function loadUser() {\n      try {\n        const session = await getCurrentSession();\n        if (session !== null && session !== void 0 && session.session) {\n          const userData = await getCurrentUser();\n          setUser(userData);\n        }\n      } catch (error) {\n        console.error('Error loading user:', error);\n      } finally {\n        setLoading(false);\n      }\n    }\n    loadUser();\n\n    // Only set up auth listener if not using placeholders\n    if (!isUsingPlaceholders) {\n      // Listen for auth changes\n      const {\n        data: authListener\n      } = supabase.auth.onAuthStateChange(async (event, session) => {\n        if (event === 'SIGNED_IN' && session) {\n          const user = await getCurrentUser();\n          setUser(user);\n        } else if (event === 'SIGNED_OUT') {\n          setUser(null);\n        }\n      });\n\n      // Cleanup function\n      return () => {\n        if (authListener && authListener.subscription) {\n          authListener.subscription.unsubscribe();\n        }\n      };\n    } else {\n      // In development mode, just set loading to false\n      setLoading(false);\n      return () => {}; // Empty cleanup function\n    }\n  }, []);\n  const login = async (email, password) => {\n    try {\n      const data = await signIn(email, password);\n      if (data.user) {\n        setUser(data.user);\n        return data;\n      }\n      throw new Error('Login failed');\n    } catch (error) {\n      console.error('Error logging in:', error);\n      throw error;\n    }\n  };\n  const logout = async () => {\n    try {\n      await signOut();\n      setUser(null);\n    } catch (error) {\n      console.error('Error signing out:', error);\n    }\n  };\n\n  // For development mode, let's add a function to simulate login\n  const devModeLogin = email => {\n    if (isUsingPlaceholders) {\n      setUser({\n        id: 'mock-user-id',\n        email: email || 'test@example.com',\n        created_at: new Date().toISOString()\n      });\n    }\n  };\n  const value = {\n    user,\n    loading,\n    login,\n    logout,\n    isAuthenticated: !!user,\n    devModeLogin,\n    // Add this for development testing\n    isDevMode: isUsingPlaceholders\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 10\n  }, this);\n}\n\n// Custom hook to use the auth context\n_s(AuthProvider, \"NiO5z6JIqzX62LS5UWDgIqbZYyY=\");\n_c = AuthProvider;\nexport function useAuth() {\n  _s2();\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n_s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","getCurrentSession","getCurrentUser","signOut","signIn","supabase","jsxDEV","_jsxDEV","AuthContext","isUsingPlaceholders","supabaseUrl","includes","AuthProvider","children","_s","user","setUser","loading","setLoading","loadUser","session","userData","error","console","data","authListener","auth","onAuthStateChange","event","subscription","unsubscribe","login","email","password","Error","logout","devModeLogin","id","created_at","Date","toISOString","value","isAuthenticated","isDevMode","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","context","undefined","$RefreshReg$"],"sources":["/Applications/MAMP/htdocs/ticketmaster/src/context/AuthContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect, useContext } from 'react';\nimport { getCurrentSession, getCurrentUser, signOut, signIn } from '../services/authService';\nimport supabase from '../supabaseClient';\n\nconst AuthContext = createContext();\n\n// Check if we're using placeholder values\nconst isUsingPlaceholders = supabase.supabaseUrl.includes('placeholder-project');\n\nexport function AuthProvider({ children }) {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    // Check active session\n    async function loadUser() {\n      try {\n        const session = await getCurrentSession();\n        if (session?.session) {\n          const userData = await getCurrentUser();\n          setUser(userData);\n        }\n      } catch (error) {\n        console.error('Error loading user:', error);\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    loadUser();\n\n    // Only set up auth listener if not using placeholders\n    if (!isUsingPlaceholders) {\n      // Listen for auth changes\n      const { data: authListener } = supabase.auth.onAuthStateChange(\n        async (event, session) => {\n          if (event === 'SIGNED_IN' && session) {\n            const user = await getCurrentUser();\n            setUser(user);\n          } else if (event === 'SIGNED_OUT') {\n            setUser(null);\n          }\n        }\n      );\n\n      // Cleanup function\n      return () => {\n        if (authListener && authListener.subscription) {\n          authListener.subscription.unsubscribe();\n        }\n      };\n    } else {\n      // In development mode, just set loading to false\n      setLoading(false);\n      return () => {}; // Empty cleanup function\n    }\n  }, []);\n\n  const login = async (email, password) => {\n    try {\n      const data = await signIn(email, password);\n      \n      if (data.user) {\n        setUser(data.user);\n        return data;\n      }\n      \n      throw new Error('Login failed');\n    } catch (error) {\n      console.error('Error logging in:', error);\n      throw error;\n    }\n  };\n\n  const logout = async () => {\n    try {\n      await signOut();\n      setUser(null);\n    } catch (error) {\n      console.error('Error signing out:', error);\n    }\n  };\n\n  // For development mode, let's add a function to simulate login\n  const devModeLogin = (email) => {\n    if (isUsingPlaceholders) {\n      setUser({\n        id: 'mock-user-id',\n        email: email || 'test@example.com',\n        created_at: new Date().toISOString()\n      });\n    }\n  };\n\n  const value = {\n    user,\n    loading,\n    login,\n    logout,\n    isAuthenticated: !!user,\n    devModeLogin, // Add this for development testing\n    isDevMode: isUsingPlaceholders\n  };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n}\n\n// Custom hook to use the auth context\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}